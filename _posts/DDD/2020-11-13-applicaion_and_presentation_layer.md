---
date: 2020-11-13 15:40:40
layout: post
title: DDD START! 도메인 주도 설계 구현과 핵심 개념 익히기
subtitle: 6. 응용 서비스와 표현 영역
description: 6. 응용 서비스와 표현 영역
image: https://leejaedoo.github.io/assets/img/ddd_start.jpeg
optimized_image: https://leejaedoo.github.io/assets/img/ddd_start.jpeg
category: ddd
tags:
  - ddd
  - 책 정리
paginate: true
comments: true
---
# 표현 영역과 응용 영역
도메인이 제 기능을 하려면 사용자와 도메인을 연결해주는 매개체가 필요하다. 즉, 여기서 응용 영역과 표현 영역이 사용자와 도메인을 연결해 주는 매개체 역할을 하게된다.

* 표현 영역(Presentation Layer)
    * 사용자의 요청을 해석한다.
    * URL, 요청 파라미터, 쿠키, 헤더 등을 이용해 사용자가 어떤 기능을 실행하고 싶어 하는지 판별하고 그 기능을 제공하는 응용 서비스를 실행한다.
    * 응용 서비스가 요구하는 형식으로 사용자 요청 파라미터 변환한다.
    
* 응용 영역(Application Layer)
    * 실제 사용자가 원하는 기능을 제공하는 영역이다.
    * 기능을 실행하는 데 필요한 입력값을 메서드 파라미터로 전달받고 실행 결과를 리턴한다.
    * 트랜잭션 처리를 다룬다.
    
응용 서비스의 메서드가 요구하는 파라미터와 표현 영역이 사용자로부터 전달받은 데이터는 형식이 다르기 때문에 `표현 영역은 응용 서비스가 요구하는 형식으로 사용자 요청을 변환`한다.

사용자와의 상호작용은 표현 영역이 처리하기 때문에 `응용 서비스는 표현 영역에 의존하지 않는다.`
# 응용 서비스의 역할
응용 서비스는 사용자의 요청을 처리하기 위해 리포지터리로부터 도메인 객체를 구하고, 도메인 객체를 사용하여 사용자의 요청을 처리한다.

응용 서비스는 주로 도메인 객체 간의 흐름을 제어하는 역할을 하기 때문에 단순한 형태를 갖는다.<br>
새로운 애그리거트를 생성하는 응용 서비스 역시 간단하다.

* ex.

```java
public Result doSomeCreation(CreateSomeReq req) {
    //  1. 데이터 중복 등 데이터가 유효한지 검사한다.
    checkValid(req);

    //  2. 애그리거트를 생성한다.
    SomeAgg newAgg = createSome(req);

    //  3. 리포지터리에 애그리거트를 저장한다.
    someAggRepository.save(newAgg);

    //  4. 결과를 리턴한다.
    return createSuccessResult(newAgg);
}
```

응용 서비스가 도메인 로직을 일부 구현하면 코드 품질에 안 좋은 영향을 줄 수 있다.

트랜잭션 처리도 응용 서비스에서 다룬다. 그 외에 접근 제어와 이벤트 처리도 응용 서비스에서 다룬다.
## 도메인 로직 넣지 않기
도메인 로직을 도메인 영역과 응용 서비스에 분산해서 구현하면 아래와 같은 이유로 코드 품질에 문제가 발생한다.
* 코드의 응집성이 떨어진다.
    * 도메인 데이터와 데이터 조작 로직이 분산되게 되면 그 만큼 여러 영역을 분석해야 한다는 것을 의미한다.
* 여러 응용 서비스에서 동일한 도메인 로직을 구현할 가능성이 높아진다.

# 응용 서비스의 구현

> 응용 서비스는 표현 영역과 도메인 영역을 연결하는 매개체 역할을 한다. - facade와 같은 역할

## 응용 서비스의 크기

## 응용 서비스의 인터페이스와 클래스
## 메서드 파라미터와 값 리턴
## 표현 영역에 의존하지 않기
## 트랜잭션 처리
## 도메인 이벤트 처리
# 표현 영역
# 값 검증
# 권한 검사
# 조회 전용 기능과 응용 서비스